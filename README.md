<<<<<<< HEAD
本次大作业我们计划实现一个体验更加好的树洞客户端。

## 主要功能

### 过滤

	用户自定义屏蔽词
	每次返回结果时都用屏蔽词过滤一次，但是也要能找到被过滤的洞
	白名单

### 搜索

	指定时间段搜索：如果没有别的限制就二分，否则就先把别的限制处理了再筛选
	多关键词搜索：多次 search ，然后取交/并
	评论搜索：从缓存洞里搜

### 图片

	猫猫
	其他动物
	风景
	校园卡
	其他

### 关注

	关注洞：新回复提醒
	关注关键词：新洞提醒
	关注图：新图提醒

### 标签

	把需要的洞划分为若干类
	出现关键词时自动分类

### 小功能

	缓存导入导出
	已回复树洞记录身份
	限制单次刷树洞时间/条数
	限制时间段不刷树洞


## 代码框架

### Hole

	记录各种信息，如正文、回复、点赞数、收藏数等
	支持 刷新、提醒 功能
	Hole_1， Hole_2， Hole_3 三个类继承自 Hole，是不同重要程度的树洞类，刷新/提醒的策略会有所不同

### HoleCollection

	维护一组树洞，可能来自缓存文件，也可能是一次朴素搜索的结果，等等
	支持 导入、导出、匹配、保存、统一刷新

### HoleFilterer

	导入屏蔽词&白名单
	地位在 MatchRule 之上，是把结果返回给用户之前的最后一关

### MatchRule

	树状结构，可以有两个儿子（此时这里是 || 或者 && ），也可以是一个 MatchRuleLeaf

### MatchRuleLeaf

	继承 MatchRule ，又要分成几类：
		时间段限制
		关键词（正文）
		关键词（回复）
	相比树洞的原始匹配功能，极大地强化了表达能力！

### HoleAPI

	负责用树洞 api 与服务器交互
	树洞 api 支持
		search：简单的关键词查询
		getlist：拉取近期树洞
		getone：拉取任意一个树洞的正文
		getcomment：拉取任意一个树洞的回复
		getattention：拉取关注树洞
		（省略了一部分）

### HoleSearcher

	根据需求使用 HoleAPI 拉取需要的洞
	关键词搜索、时间段二分、等等
	不能一次拉取所有洞，所以还需要记录当前拉取到哪里

### ImageClassifier

	导入一个轻量级的神经网络模型
	负责识别图片内容

### ImageManager

	负责爬取图片、用 classifier 打标签、存储、图片搜索

### AntiAddictionSystem

	防沉迷系统，可以根据用户设置来限制可以浏览的洞的条数
	地位在以上所有 class 之上，在返回给前端之前把超额的洞删除

### QtInteracter

	负责与前端进行所有交互，并把任务分配到以上的 class ，最后返回需要的信息
	隔开前端和后端

### TerminalInterater

	与 QtInteractionManager 并列，负责与命令行交互


## 时间节点

时间节点 0 （5 月 20 日前）：确定所有类的定义和成员函数参数等。（已完成）

时间节点 1 （5 月 27 日前）：实现 Hole, HoleCollection, HoleAPI ，并测试导入导出。

时间节点 2 （6 月 12 日前）：实现 HoleFilterer, MatchRule, MatchRuleLeaf, HoleSearcher, TerminalInterater ，并用命令行测试交互效果。

时间节点 3 （6 月 19 日前）：实现剩余小功能，并完成与 Qt 图形界面的交互。

时间节点 4 （6 月 30 日前）：小范围发放给同学使用，完成最终优化和测试，撰写文档。
=======
# PKU-Hole
>>>>>>> 1f11871487078b03971aa283785870dcfa967d9d
